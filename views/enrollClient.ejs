<%- include('partials/Enrol/enrolheader') %>

<body>
  <header class="header">
    <a href="/dashboard" class="back-button">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
      </svg>
      Back to Dashboard
    </a>
   
    <div style="width: 100px;"></div> <!-- Spacer for centering -->
  </header>

  <div class="container">
    <div class="card">
      <div class="card-header">
        <h2>Enroll Client in Program</h2>
        <p>Select a client and program to create an enrollment</p>
      </div>

      <form method="POST" action="/programs/enroll">
        <div class="form-group">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          <input type="text" id="client_search" class="search-select" placeholder="Search for a client..." autocomplete="off">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
          <div id="client_search_dropdown" class="search-select-dropdown"></div>
          <input type="hidden" id="client_id_hidden" name="client_id">

          <!-- Original select element (hidden but still in the DOM for EJS) -->
          <select name="client_id" id="client_id">
            <option value="" disabled selected>Select a client</option>
            <% clients.forEach(c => { %>
              <option value="<%= c.id %>"><%= c.full_name %></option>
            <% }) %>
          </select>
        </div>

        <div class="form-group">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"/>
          </svg>
          <input type="text" id="program_search" class="search-select" placeholder="Search for a program..." autocomplete="off">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
          <div id="program_search_dropdown" class="search-select-dropdown"></div>
          <input type="hidden" id="program_id_hidden" name="program_id">

          <!-- Original select element (hidden but still in the DOM for EJS) -->
          <select name="program_id" id="program_id">
            <option value="" disabled selected>Select a program</option>
            <% programs.forEach(p => { %>
              <option value="<%= p.id %>"><%= p.name %></option>
            <% }) %>
          </select>
        </div>

        <div class="enrollment-info">
          <p>Enrolling a client in a program will allow you to track their progress and provide specialized care according to the program guidelines.</p>
        </div>

        <button type="submit">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
          </svg>
          Enroll Client
        </button>
      </form>
    </div>

    <div class="footer">
      <p>Need help? <a href="/support">Contact Support</a></p>
    </div>
  </div>
</body>
<%- include('partials/Enrol/enrolfooter') %>


