<%- include('partials/dashboard/dashboardheader') %>

<body>
  <header class="header">
    <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Open menu">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
      </svg>
    </button>
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search by name or phone">
      <button onclick="searchClient()">Search</button>
    </div>
    <div class="user-menu"></div>
  </header>

  <aside class="sidebar">
    <div class="sidebar-logo">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"/>
      </svg>
      <h2>MedPortal</h2>
    </div>

    <nav class="sidebar-menu">
      <div class="menu-section">
        <div class="menu-section-title">Main</div>
        <a href="#" class="menu-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
          </svg>
          Dashboard
        </a>
        <a href="/clients/register" class="menu-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          Register Client
        </a>
        <a href="/programs/add" class="menu-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
          </svg>
          Add Program
        </a>
        <a href="/programs/enroll" class="menu-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
          </svg>
          Enroll Client
        </a>
      </div>

      <div class="menu-section">
        <div class="menu-section-title">Account</div>
        <a href="/logout" class="menu-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
          </svg>
          Logout
        </a>
        <a href="/doctor/delete" onclick="return confirm('WARNING: This will permanently delete your account and all your data. Continue?')" class="menu-item danger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
          </svg>
          Delete My Account
        </a>
      </div>

      <div class="creator-info">
        <p><strong>Created by:</strong> Erick Olando</p>
        <p><strong>Contact:</strong> <a href="tel:+254710897101">+254710897101</a></p>
        <p><strong>Email:</strong> <a href="mailto:Olandoerick98@gmail.com">Olandoerick98@gmail.com</a></p>
        <p>&copy; 2023 MedPortal. All rights reserved.</p>
      </div>
    </nav>
  </aside>

  <div id="mobile-drawer" class="mobile-drawer">
    <div class="mobile-drawer-content">
      <div class="mobile-drawer-header">
        <div class="sidebar-logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"/>
          </svg>
          <h2>MedPortal</h2>
        </div>
        <button id="mobile-drawer-close" class="mobile-drawer-close" aria-label="Close menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>

      <nav class="sidebar-menu">
        <div class="menu-section">
          <div class="menu-section-title">Main</div>
          <a href="#" class="menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
            </svg>
            Dashboard
          </a>
          <a href="/clients/register" class="menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            Register Client
          </a>
          <a href="/programs/add" class="menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
            </svg>
            Add Program
          </a>
          <a href="/programs/enroll" class="menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
            </svg>
            Enroll Client
          </a>
        </div>

        <div class="menu-section">
          <div class="menu-section-title">Account</div>
          <a href="/logout" class="menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
            </svg>
            Logout
          </a>
          <a href="/doctor/delete" onclick="return confirm('WARNING: This will permanently delete your account and all your data. Continue?')" class="menu-item danger">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
          </svg>
          Delete My Account
        </a>
      </div>

      <div class="creator-info">
        <p><strong>Created by:</strong> Erick Olando</p>
        <p><strong>Contact:</strong> <a href="tel:+254710897101">+254710897101</a></p>
        <p><strong>Email:</strong> <a href="mailto:Olandoerick98@gmail.com">Olandoerick98@gmail.com</a></p>
        <p>&copy; 2023 MedPortal. All rights reserved.</p>
      </div>
    </nav>
    </div>
  </div>

  <nav class="mobile-nav">
    <div class="mobile-nav-menu">
      <a href="#" class="mobile-nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
        </svg>
        <span>Dashboard</span>
      </a>
      <a href="/clients/register" class="mobile-nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
        <span>Register</span>
      </a>
      <a href="/programs/add" class="mobile-nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
        </svg>
        <span>Program</span>
      </a>
      <a href="/programs/enroll" class="mobile-nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
        </svg>
        <span>Enroll</span>
      </a>
    </div>
  </nav>

  <main class="main-content">
    <div class="content-wrapper">
      <div class="section-header"></div>

      <div class="clients-grid" id="clientsGrid">
        <div class="no-clients-message" id="noClientsMessage">
  <img src="https://i.pinimg.com/736x/76/9c/b6/769cb65fa3b3efe5eca16cf29a280d7e.jpg" alt="No clients" class="no-clients-image" />
  <h3>Oops! No clients found</h3>
  <p>We couldn't find any clients matching your search criteria. Try adjusting your search or add a new client.</p>
</div>


        <% clients.forEach(c => { %>
          <div class="client-card" onclick="navigateToClient(<%= c.id %>)">
            <div class="client-info">
              <div class="client-avatar" data-name="<%= c.full_name %>">
              </div>
              <div class="client-details">
                <span class="client-name"><%= c.full_name %></span>
                <span class="client-phone"><%= c.phone %></span>
              </div>
            </div>
            <div class="client-actions">
              <button onclick="confirmDelete(<%= c.id %>, '<%= c.full_name %>', event)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
                Delete
              </button>
            </div>
            <a href="/clients/<%= c.id %>" class="client-card-link" aria-label="View <%= c.full_name %>'s details"></a>
          </div>
        <% }) %>
      </div>
    </div>

    <div class="pagination-container" id="pagination-container">
      <div class="pagination" id="pagination"></div>
    </div>
  </main>

  <footer class="footer">
    <p>&copy; 2023 MedPortal by Erick Olando. All rights reserved.</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(addSampleClients, 500);
    });
  </script>
</body>
<%- include('partials/dashboard/dashboardFooter') %>
